<script src="http://cdn.alloyui.com/3.0.1/aui/aui-min.js"></script>
<h3><?php var_dump($this->_vars); ?></h3>
<input type="hidden" id="uniAclConfig" value='<?php echo json_encode($this->uniAclConfig); ?>'>
<input type="hidden" id="userActionOnRole" value='<?php echo json_encode($this->userActionOnRole); ?>'>
<!-- CONTROLLER !-->
<div id="controller">CONTROLLER</div>
<div id="myTreeView"></div>
<div id="myTreeViewV2"></div>
<script>
    (function($){
        $(document).ready(function(){
            const CONTROLLER_ACTION = "CONTROLLER_ACTION";
            /**
             * READ CONFIG from server
             */
            var uniAclConfig = JSON.parse($("#uniAclConfig").val());
            var userActionOnRole = JSON.parse($("#userActionOnRole").val());
            console.log(uniAclConfig);
            console.log(userActionOnRole);

            /**
             * VIEW on CONTROLLER
             */
            var controllerAction = uniAclConfig[CONTROLLER_ACTION];
            console.log(controllerAction);
//            var controllerDiv = $("#controller");
            var auiTreeData = [];
            for(var controller in controllerAction){
                if(controllerAction.hasOwnProperty(controller)){
                    var actionData = [];
                    auiTreeData.push({
                        children: actionData, expanded: true,
                        label: controller,
                        type: 'task'
                    });
                    var actionArray = controllerAction[controller];
                    for(var i = 0; i < actionArray.length; i++){
                        actionData.push({
                            label: actionArray[i],
                            leaf: true,
                            type: 'task'
                        })
                    }

                }
            }
            YUI().use(
                'aui-tree-view',
                function(Y){
                    new Y.TreeView(
                        {
                            boundingBox: '#myTreeView',
                            children: auiTreeData
                        }
                    ).render();
                }
            );

        });
    })(jQuery);
</script>

